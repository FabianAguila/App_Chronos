{"ast":null,"code":"import { ActivatedRoute } from '@angular/router';\nimport { Preferences } from '@capacitor/preferences';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@ionic/angular\";\nconst _c0 = function (a1) {\n  return [\"burbuja\", a1];\n};\nfunction ChatRoomPage_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 16);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const m_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, m_r1.de));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r1.texto);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r1.hora);\n  }\n}\nexport let ChatRoomPage = /*#__PURE__*/(() => {\n  class ChatRoomPage {\n    constructor(route) {\n      this.route = route;\n      this.profesorNombre = '';\n      this.mensajes = [];\n      this.mensajeNuevo = '';\n      this.privadoRemitente = 'alumno';\n    }\n    ngOnInit() {\n      this.profesorId = Number(this.route.snapshot.paramMap.get('id'));\n      const nombres = {\n        1: 'Profesor García',\n        2: 'Profesora Rodríguez',\n        3: 'Profesor Martínez',\n        4: 'Orientadora Pérez'\n      };\n      this.profesorNombre = nombres[this.profesorId] || 'Profesor';\n      // Mensajes de ejemplo iniciales\n      this.mensajes = [{\n        de: 'profesor',\n        texto: `Hola, soy ${this.profesorNombre}. ¿En qué puedo ayudarte?`,\n        hora: '10:00'\n      }, {\n        de: 'alumno',\n        texto: 'Profe, tengo una duda sobre la guía.',\n        hora: '10:01'\n      }];\n      // Decide remitente por role guardado (si es profesor, remitente será profesor)\n      Preferences.get({\n        key: 'rol'\n      }).then(({\n        value\n      }) => {\n        if (value === 'profesor') this.privadoRemitente = 'profesor';else this.privadoRemitente = 'alumno';\n      });\n    }\n    enviar() {\n      const texto = this.mensajeNuevo.trim();\n      if (!texto) {\n        return;\n      }\n      const ahora = new Date();\n      const hora = ahora.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n      this.mensajes.push({\n        de: this.privadoRemitente,\n        texto,\n        hora\n      });\n      this.mensajeNuevo = '';\n    }\n  }\n  ChatRoomPage.ɵfac = function ChatRoomPage_Factory(t) {\n    return new (t || ChatRoomPage)(i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n  };\n  ChatRoomPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChatRoomPage,\n    selectors: [[\"app-chat-room\"]],\n    decls: 17,\n    vars: 3,\n    consts: [[1, \"chat-header\", \"ion-no-border\"], [1, \"header-toolbar\"], [\"slot\", \"start\"], [\"defaultHref\", \"/chat\"], [1, \"brand\"], [\"name\", \"person-circle-outline\"], [1, \"chat-room-content\"], [1, \"mensajes\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"chat-input-footer\"], [\"lines\", \"none\"], [\"placeholder\", \"Escribe un mensaje\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [\"fill\", \"clear\", 3, \"click\"], [\"name\", \"send-outline\"], [3, \"ngClass\"], [1, \"texto\"], [1, \"hora\"]],\n    template: function ChatRoomPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\", 1)(2, \"ion-buttons\", 2);\n        i0.ɵɵelement(3, \"ion-back-button\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-title\", 4);\n        i0.ɵɵelement(5, \"ion-icon\", 5);\n        i0.ɵɵelementStart(6, \"span\");\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(8, \"ion-content\", 6)(9, \"div\", 7);\n        i0.ɵɵtemplate(10, ChatRoomPage_div_10_Template, 5, 5, \"div\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"ion-footer\", 9)(12, \"ion-toolbar\")(13, \"ion-item\", 10)(14, \"ion-input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function ChatRoomPage_Template_ion_input_ngModelChange_14_listener($event) {\n          return ctx.mensajeNuevo = $event;\n        })(\"keyup.enter\", function ChatRoomPage_Template_ion_input_keyup_enter_14_listener() {\n          return ctx.enviar();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"ion-button\", 12);\n        i0.ɵɵlistener(\"click\", function ChatRoomPage_Template_ion_button_click_15_listener() {\n          return ctx.enviar();\n        });\n        i0.ɵɵelement(16, \"ion-icon\", 13);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.profesorNombre);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.mensajes);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.mensajeNuevo);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i3.NgControlStatus, i3.NgModel, i4.IonBackButton, i4.IonButton, i4.IonButtons, i4.IonContent, i4.IonFooter, i4.IonHeader, i4.IonIcon, i4.IonInput, i4.IonItem, i4.IonTitle, i4.IonToolbar, i4.TextValueAccessor, i4.IonBackButtonDelegate],\n    styles: [\".chat-room-content[_ngcontent-%COMP%]{--background: #f6f7fb}.mensajes[_ngcontent-%COMP%]{padding:12px;display:flex;flex-direction:column;gap:8px}.burbuja[_ngcontent-%COMP%]{max-width:80%;padding:8px 10px;border-radius:12px;font-size:14px}.burbuja.profesor[_ngcontent-%COMP%]{align-self:flex-start;background:#e5e7eb}.burbuja.alumno[_ngcontent-%COMP%]{align-self:flex-end;background:#3b82f6;color:#fff}.burbuja[_ngcontent-%COMP%]   .hora[_ngcontent-%COMP%]{font-size:11px;opacity:.7;margin-top:2px;text-align:right}.chat-input-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: #fff}\"]\n  });\n  return ChatRoomPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}