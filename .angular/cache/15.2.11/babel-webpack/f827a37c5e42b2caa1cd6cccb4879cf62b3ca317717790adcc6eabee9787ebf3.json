{"ast":null,"code":"import _asyncToGenerator from \"E:/Git_Chronos/App_Chronos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Router } from '@angular/router';\nimport { Preferences } from '@capacitor/preferences';\nimport { ApiService } from '../servicios/api.service';\nimport { take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../servicios/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@ionic/angular\";\nfunction TeacherHomePage_article_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"article\", 21)(1, \"div\", 22);\n    i0.ɵɵelement(2, \"img\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 24)(4, \"h3\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 25);\n    i0.ɵɵelement(7, \"ion-icon\", 26);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementStart(9, \"span\", 27);\n    i0.ɵɵtext(10, \"\\u2022\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"ion-icon\", 28);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 29)(14, \"ion-button\", 30);\n    i0.ɵɵlistener(\"click\", function TeacherHomePage_article_43_Template_ion_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const c_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.goNotas(c_r1));\n    });\n    i0.ɵɵelement(15, \"ion-icon\", 31);\n    i0.ɵɵtext(16, \" Notas \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"ion-button\", 30);\n    i0.ɵɵlistener(\"click\", function TeacherHomePage_article_43_Template_ion_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const c_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.goAsistencia(c_r1));\n    });\n    i0.ɵɵelement(18, \"ion-icon\", 32);\n    i0.ɵɵtext(19, \" Asistencia \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"ion-button\", 30);\n    i0.ɵɵlistener(\"click\", function TeacherHomePage_article_43_Template_ion_button_click_20_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const c_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.goSala(c_r1));\n    });\n    i0.ɵɵelement(21, \"ion-icon\", 33);\n    i0.ɵɵtext(22, \" Sala \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const c_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"alt\", c_r1.nombre);\n    i0.ɵɵproperty(\"src\", c_r1.imagen || \"assets/images/curso-default.png\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(c_r1.nombre);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", c_r1.grado, \"\\u00B0 Grado \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", c_r1.alumnos, \" Alumnos \");\n  }\n}\nexport let TeacherHomePage = /*#__PURE__*/(() => {\n  class TeacherHomePage {\n    constructor(api, router) {\n      this.api = api;\n      this.router = router;\n      this.perfil = {\n        nombre: ''\n      };\n      this.cursos = [];\n      this.loading = false;\n    }\n    abrirChat() {\n      this.router.navigate(['/chat']); // ajusta la ruta si tu página de chat usa otra\n    }\n\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.loading = true;\n        // 1) Lee el profesorId que guardaste en login (ajusta la key si usas otra)\n        const {\n          value\n        } = yield Preferences.get({\n          key: 'profesorId'\n        });\n        const profesorId = value ? Number(value) : null;\n        if (!profesorId || Number.isNaN(profesorId)) {\n          // Si no hay profesorId, redirige o muestra mensaje\n          _this.router.navigate(['/login']);\n          return;\n        }\n        // 2) Carga perfil, cursos y métricas\n        _this.api.getProfesor(profesorId).pipe(take(1)).subscribe(p => _this.perfil = {\n          nombre: p.nom_prof,\n          avatar: ''\n        });\n        _this.api.getCursosProfesor(profesorId).pipe(take(1)).subscribe(c => _this.cursos = c);\n        _this.api.getDashboardProfesor(profesorId).pipe(take(1)).subscribe(d => _this.metrics = d);\n        _this.loading = false;\n      })();\n    }\n    goPlanificador() {\n      this.router.navigate(['/teacher-home/planificador']);\n    }\n    goNotas(curso) {\n      this.router.navigate([`/teacher-home/curso/${curso.id}/nota`]);\n    }\n    goAsistencia(curso) {\n      this.router.navigate([`/teacher-home/curso/${curso.id}/asistencia`]);\n    }\n    goSala(curso) {\n      this.router.navigate([`/teacher-home/sala/${curso.id}`]);\n    }\n    cerrarSesion() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        yield Preferences.clear();\n        _this2.router.navigate(['/login']);\n      })();\n    }\n  }\n  TeacherHomePage.ɵfac = function TeacherHomePage_Factory(t) {\n    return new (t || TeacherHomePage)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  TeacherHomePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TeacherHomePage,\n    selectors: [[\"app-teacher-home\"]],\n    decls: 44,\n    vars: 3,\n    consts: [[1, \"ion-no-border\"], [\"slot\", \"end\"], [\"fill\", \"clear\", 3, \"click\"], [\"name\", \"chatbubble-ellipses-outline\"], [1, \"sr-only\"], [\"fill\", \"solid\", \"color\", \"danger\", \"title\", \"Cerrar sesi\\u00F3n\", 2, \"margin-right\", \"8px\", 3, \"click\"], [\"name\", \"log-out-outline\", \"slot\", \"start\"], [1, \"avatar\"], [\"alt\", \"Perfil\", 3, \"src\"], [\"fullscreen\", \"\", 1, \"dash-bg\"], [1, \"wrap\"], [1, \"welcome\"], [1, \"quote\"], [1, \"quick\"], [1, \"quick-grid\"], [1, \"qcard\", 3, \"click\"], [\"name\", \"calendar-outline\"], [\"name\", \"chatbubble-outline\"], [1, \"courses\"], [1, \"courses-grid\"], [\"class\", \"course\", 4, \"ngFor\", \"ngForOf\"], [1, \"course\"], [1, \"thumb\"], [3, \"src\", \"alt\"], [1, \"body\"], [1, \"meta\"], [\"name\", \"ribbon-outline\"], [1, \"dot\"], [\"name\", \"people-outline\"], [1, \"actions\"], [\"size\", \"small\", \"fill\", \"clear\", 3, \"click\"], [\"name\", \"school-outline\", \"slot\", \"start\"], [\"name\", \"checkmark-done-outline\", \"slot\", \"start\"], [\"name\", \"business-outline\", \"slot\", \"start\"]],\n    template: function TeacherHomePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Dashboard\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-buttons\", 1)(5, \"ion-button\", 2);\n        i0.ɵɵlistener(\"click\", function TeacherHomePage_Template_ion_button_click_5_listener() {\n          return ctx.abrirChat();\n        });\n        i0.ɵɵelement(6, \"ion-icon\", 3);\n        i0.ɵɵelementStart(7, \"ion-label\", 4);\n        i0.ɵɵtext(8, \"Chat\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"ion-button\", 5);\n        i0.ɵɵlistener(\"click\", function TeacherHomePage_Template_ion_button_click_9_listener() {\n          return ctx.cerrarSesion();\n        });\n        i0.ɵɵelement(10, \"ion-icon\", 6);\n        i0.ɵɵtext(11, \" Cerrar sesi\\u00F3n \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"ion-avatar\", 7);\n        i0.ɵɵelement(13, \"img\", 8);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(14, \"ion-content\", 9)(15, \"div\", 10)(16, \"section\", 11)(17, \"h1\");\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"p\", 12);\n        i0.ɵɵtext(20, \"\\u201CEducar es encender una llama, no llenar un recipiente.\\u201D\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"section\", 13)(22, \"h2\");\n        i0.ɵɵtext(23, \"Acceso R\\u00E1pido\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 14)(25, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function TeacherHomePage_Template_button_click_25_listener() {\n          return ctx.goPlanificador();\n        });\n        i0.ɵɵelement(26, \"ion-icon\", 16);\n        i0.ɵɵelementStart(27, \"div\")(28, \"h3\");\n        i0.ɵɵtext(29, \"Planificador\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"p\");\n        i0.ɵɵtext(31, \"Organiza tus sesiones y evita solapes.\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(32, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function TeacherHomePage_Template_button_click_32_listener() {\n          return ctx.abrirChat();\n        });\n        i0.ɵɵelement(33, \"ion-icon\", 17);\n        i0.ɵɵelementStart(34, \"div\")(35, \"h3\");\n        i0.ɵɵtext(36, \"Chat\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"p\");\n        i0.ɵɵtext(38, \"Comun\\u00EDcate con alumnos y apoderados.\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(39, \"section\", 18)(40, \"h2\");\n        i0.ɵɵtext(41, \"Mis Cursos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"div\", 19);\n        i0.ɵɵtemplate(43, TeacherHomePage_article_43_Template, 23, 5, \"article\", 20);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"src\", (ctx.perfil == null ? null : ctx.perfil.avatar) || \"assets/images/avatar-teacher.png\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"\\u00A1Hola, \", (ctx.perfil == null ? null : ctx.perfil.nombre) || \"Profesor/a\", \"!\");\n        i0.ɵɵadvance(25);\n        i0.ɵɵproperty(\"ngForOf\", ctx.cursos);\n      }\n    },\n    dependencies: [i3.NgForOf, i4.IonAvatar, i4.IonButton, i4.IonButtons, i4.IonContent, i4.IonHeader, i4.IonIcon, i4.IonLabel, i4.IonTitle, i4.IonToolbar],\n    styles: [\".dash-bg[_ngcontent-%COMP%]{--ion-background-color: #f7f9fc}.wrap[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;padding:16px}ion-toolbar[_ngcontent-%COMP%]{--background: #fff;--border-color: transparent}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;margin-right:8px}.welcome[_ngcontent-%COMP%]{background:#e9f1ff;border:1px solid #dbe7ff;padding:18px 20px;border-radius:14px;margin:8px 0 18px}.welcome[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:#0f172a}.welcome[_ngcontent-%COMP%]   .quote[_ngcontent-%COMP%]{margin:6px 0 0;color:#64748b;font-size:13px}.quick[_ngcontent-%COMP%]{margin-top:4px}.quick[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .courses[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:12px 0 10px;font-size:16px;color:#0f172a}.quick-grid[_ngcontent-%COMP%]{display:grid;gap:12px;grid-template-columns:repeat(4,minmax(0,1fr))}.qcard[_ngcontent-%COMP%]{display:flex;gap:12px;text-align:left;align-items:flex-start;padding:16px;border-radius:14px;border:1px solid #e2e8f0;background:#fff;cursor:pointer;transition:box-shadow .2s,transform .05s}.qcard[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px;color:#2563eb;margin-top:2px}.qcard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 2px;font-size:14px;color:#0f172a}.qcard[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#64748b}.qcard[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #0f172a0f}.qcard[_ngcontent-%COMP%]:active{transform:translateY(1px)}.courses-grid[_ngcontent-%COMP%]{display:grid;gap:14px;grid-template-columns:repeat(3,minmax(0,1fr))}.course[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:14px;background:#fff;overflow:hidden;display:grid;grid-template-rows:140px auto}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.body[_ngcontent-%COMP%]{padding:12px 14px 8px}.body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px;font-size:15px;color:#0f172a}.meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#64748b;font-size:12px;margin:0 0 8px}.meta[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.meta[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{font-size:18px;line-height:0;margin-top:-2px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 10px;--padding-start: 0;--padding-end: 0}@media (max-width: 992px){.quick-grid[_ngcontent-%COMP%], .courses-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 640px){.quick-grid[_ngcontent-%COMP%], .courses-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}\"]\n  });\n  return TeacherHomePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}