{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/fabia/Desktop/ProyectoAppRegis/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Geolocation } from '@capacitor/geolocation';\nimport { Preferences } from '@capacitor/preferences';\nimport { Camera, CameraResultType } from '@capacitor/camera';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@ionic/angular\";\nfunction RegistrarDatosQRPage_p_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" Latitud: \", ctx_r0.latitude, \", Longitud: \", ctx_r0.longitude, \" \");\n  }\n}\nfunction RegistrarDatosQRPage_ion_item_14_ng_container_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"Regi\\u00F3n:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const usuario_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", usuario_r2.region.nombre, \"\");\n  }\n}\nfunction RegistrarDatosQRPage_ion_item_14_ng_container_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"Comuna:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const usuario_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", usuario_r2.comuna.nombre, \"\");\n  }\n}\nfunction RegistrarDatosQRPage_ion_item_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\")(2, \"strong\");\n    i0.ɵɵtext(3, \"RUT:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementStart(6, \"strong\");\n    i0.ɵɵtext(7, \"Nombre:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementStart(10, \"strong\");\n    i0.ɵɵtext(11, \"Apellido:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelement(13, \"br\");\n    i0.ɵɵelementStart(14, \"strong\");\n    i0.ɵɵtext(15, \"Usuario:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelement(17, \"br\");\n    i0.ɵɵtemplate(18, RegistrarDatosQRPage_ion_item_14_ng_container_18_Template, 5, 1, \"ng-container\", 3);\n    i0.ɵɵtemplate(19, RegistrarDatosQRPage_ion_item_14_ng_container_19_Template, 5, 1, \"ng-container\", 3);\n    i0.ɵɵelementStart(20, \"strong\");\n    i0.ɵɵtext(21, \"La hora:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22);\n    i0.ɵɵelement(23, \"br\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const usuario_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", usuario_r2.rut, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", usuario_r2.nombre, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", usuario_r2.apellido, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", usuario_r2.usuario, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", usuario_r2.region);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", usuario_r2.comuna);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.horaPreferences, \"\");\n  }\n}\nexport let RegistrarDatosQRPage = /*#__PURE__*/(() => {\n  class RegistrarDatosQRPage {\n    constructor() {\n      this.msjPreferences = '';\n      this.horaPreferences = '';\n      this.usuarios = [];\n      this.imageSrc = '';\n    }\n    ngOnInit() {\n      this.getCurrentPosition();\n      this.retrieveMessageFromPreferences();\n      this.retrieveUsuariosFromPreferences();\n      this.retrieveHoraFromPreferences();\n    }\n    getCurrentPosition() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const coordinates = yield Geolocation.getCurrentPosition();\n          _this.latitude = coordinates.coords.latitude;\n          _this.longitude = coordinates.coords.longitude;\n        } catch (error) {\n          console.error('Se ha encontrado un error con la posicion actual', error);\n        }\n      })();\n    }\n    abrirCamara() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const image = yield Camera.getPhoto({\n            quality: 90,\n            allowEditing: true,\n            resultType: CameraResultType.Uri\n          });\n          if (image && image.webPath) {\n            _this2.imageSrc = image.webPath;\n          } else {\n            console.log('No se ha capturado ninguna imagen');\n          }\n        } catch (error) {\n          console.error('Se ha encontrado un error con la camara', error);\n        }\n      })();\n    }\n    retrieveMessageFromPreferences() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const mensaje = yield Preferences.get({\n            key: 'msj'\n          });\n          if (mensaje && mensaje.value) {\n            _this3.msjPreferences = _this3.agregarSaltosDeLinea(mensaje.value);\n            console.log(\"ahora si \", mensaje);\n          }\n        } catch (error) {\n          console.error('No se ah podido recuperar el mensaje desde Preferences', error);\n        }\n      })();\n    }\n    retrieveUsuariosFromPreferences() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const usuariosJSON = yield Preferences.get({\n            key: 'usuarios'\n          });\n          if (usuariosJSON && usuariosJSON.value) {\n            _this4.usuarios = JSON.parse(usuariosJSON.value);\n          }\n        } catch (error) {\n          console.error('No se ha podido recuperar los usuarios desde Preferences', error);\n        }\n      })();\n    }\n    retrieveHoraFromPreferences() {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const hora = yield Preferences.get({\n            key: 'hora'\n          });\n          if (hora && hora.value) {\n            _this5.horaPreferences = hora.value;\n          }\n        } catch (error) {\n          console.error('No se ha podido recuperar la hora desde Preferences:', error);\n        }\n      })();\n    }\n    agregarSaltosDeLinea(mensaje) {\n      return mensaje.replace(/,/g, '<br>');\n    }\n  }\n  RegistrarDatosQRPage.ɵfac = function RegistrarDatosQRPage_Factory(t) {\n    return new (t || RegistrarDatosQRPage)();\n  };\n  RegistrarDatosQRPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegistrarDatosQRPage,\n    selectors: [[\"app-registrar-datos-qr\"]],\n    decls: 15,\n    vars: 4,\n    consts: [[1, \"ion-no-margin\"], [3, \"fullscreen\"], [3, \"innerHTML\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function RegistrarDatosQRPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-card\", 0)(1, \"ion-card-header\")(2, \"ion-card-title\");\n        i0.ɵɵtext(3, \" Registrar Tus Datos \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(4, \"ion-content\", 1)(5, \"ion-card\")(6, \"ion-title\");\n        i0.ɵɵtext(7, \" DATOS DEL USUARIO \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"p\", 2);\n        i0.ɵɵtemplate(9, RegistrarDatosQRPage_p_9_Template, 2, 2, \"p\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"ion-card\")(11, \"ion-title\");\n        i0.ɵɵtext(12, \"Alumno\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"ion-list\");\n        i0.ɵɵtemplate(14, RegistrarDatosQRPage_ion_item_14_Template, 24, 7, \"ion-item\", 4);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"innerHTML\", ctx.msjPreferences, i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.latitude !== undefined && ctx.longitude !== undefined);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.usuarios);\n      }\n    },\n    dependencies: [i1.NgForOf, i1.NgIf, i2.IonCard, i2.IonCardHeader, i2.IonCardTitle, i2.IonContent, i2.IonItem, i2.IonLabel, i2.IonList, i2.IonTitle],\n    styles: [\"ion-card[_ngcontent-%COMP%]{margin-bottom:16px}ion-card-title[_ngcontent-%COMP%]{font-size:1.5em}ion-card-header[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}ion-content[_ngcontent-%COMP%]{padding:16px}ion-title[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;margin-bottom:12px}ion-list[_ngcontent-%COMP%]{margin-top:12px}ion-item[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding:8px}ion-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px}\"]\n  });\n  return RegistrarDatosQRPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}