{"ast":null,"code":"import _asyncToGenerator from \"E:/Git_Chronos/App_Chronos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { ApiService } from '../servicios/api.service';\nimport { NavController, ToastController } from '@ionic/angular';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../servicios/api.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nfunction SignupProfesorPage_ng_container_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 20)(2, \"ion-item\", 8);\n    i0.ɵɵelement(3, \"ion-input\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-item\", 8);\n    i0.ɵɵelement(5, \"ion-input\", 22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nconst _c0 = function () {\n  return [\"/login\"];\n};\nexport let SignupProfesorPage = /*#__PURE__*/(() => {\n  class SignupProfesorPage {\n    constructor(fb, api, navCtrl, toastCtrl) {\n      this.fb = fb;\n      this.api = api;\n      this.navCtrl = navCtrl;\n      this.toastCtrl = toastCtrl;\n      this.formRegisProfesor = this.fb.group({\n        nombreCompleto: ['', Validators.required],\n        correoElectronico: ['', [Validators.required, Validators.email]],\n        contrasena: ['', Validators.required],\n        usaVehiculo: [false],\n        matricula: [''],\n        descripcionVehiculo: ['']\n      });\n    }\n    toggleVehiculo() {\n      if (!this.formRegisProfesor.get('usaVehiculo')?.value) {\n        this.formRegisProfesor.patchValue({\n          matricula: '',\n          descripcionVehiculo: ''\n        });\n      }\n    }\n    registrarProfesor() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (_this.formRegisProfesor.invalid) {\n          const toast = yield _this.toastCtrl.create({\n            message: 'Por favor completa todos los campos obligatorios',\n            duration: 2000,\n            color: 'warning'\n          });\n          yield toast.present();\n          return;\n        }\n        const formValue = _this.formRegisProfesor.value;\n        const profesor = {\n          Nom_prof: formValue.nombreCompleto,\n          CorreoElectronico: formValue.correoElectronico?.trim(),\n          Contrasena: formValue.contrasena?.trim(),\n          Matricula: formValue.matricula || '',\n          DescripcionVehiculo: formValue.descripcionVehiculo || ''\n        };\n        try {\n          yield _this.api.registrarProfesor(profesor).toPromise();\n          const toast = yield _this.toastCtrl.create({\n            message: 'Registro exitoso',\n            duration: 2000,\n            color: 'success'\n          });\n          yield toast.present();\n          _this.navCtrl.navigateRoot('/login');\n        } catch (error) {\n          let mensaje = 'Error al registrar';\n          if (error && typeof error === 'object' && 'error' in error) {\n            const err = error;\n            if (typeof err.error === 'string') {\n              mensaje = err.error;\n            } else if (err.status === 409) {\n              mensaje = 'El correo ya está registrado';\n            }\n          }\n          const toast = yield _this.toastCtrl.create({\n            message: mensaje,\n            duration: 2000,\n            color: 'danger'\n          });\n          yield toast.present();\n        }\n      })();\n    }\n  }\n  SignupProfesorPage.ɵfac = function SignupProfesorPage_Factory(t) {\n    return new (t || SignupProfesorPage)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.NavController), i0.ɵɵdirectiveInject(i3.ToastController));\n  };\n  SignupProfesorPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SignupProfesorPage,\n    selectors: [[\"app-signup-profesor\"]],\n    decls: 32,\n    vars: 6,\n    consts: [[1, \"auth-content\", 3, \"fullscreen\"], [1, \"auth-wrapper\"], [1, \"auth-card\"], [1, \"auth-header\"], [1, \"icon-container\"], [\"src\", \"assets/icon/icon-Chronos.png\", \"alt\", \"Chronos Logo\", 2, \"width\", \"100%\", \"height\", \"100%\", \"object-fit\", \"cover\"], [1, \"auth-form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"input-group\"], [\"lines\", \"none\", 1, \"custom-input\"], [\"formControlName\", \"nombreCompleto\", \"placeholder\", \"Nombre Completo\"], [\"formControlName\", \"correoElectronico\", \"type\", \"email\", \"placeholder\", \"Correo Institucional\", \"inputmode\", \"email\"], [\"formControlName\", \"contrasena\", \"type\", \"password\", \"placeholder\", \"Contrase\\u00F1a\"], [1, \"vehicle-section\"], [\"lines\", \"none\", 1, \"toggle-item\"], [\"formControlName\", \"usaVehiculo\", \"mode\", \"ios\", 3, \"ionChange\"], [4, \"ngIf\"], [1, \"form-actions\"], [\"type\", \"submit\", \"expand\", \"block\", 1, \"submit-btn\", 3, \"disabled\"], [1, \"auth-footer\"], [\"fill\", \"clear\", \"size\", \"small\", 1, \"login-link\", 3, \"routerLink\"], [1, \"input-group\", \"vehicle-inputs\"], [\"formControlName\", \"matricula\", \"placeholder\", \"Matr\\u00EDcula\"], [\"formControlName\", \"descripcionVehiculo\", \"placeholder\", \"Descripci\\u00F3n del Veh\\u00EDculo\"]],\n    template: function SignupProfesorPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-content\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n        i0.ɵɵelement(5, \"img\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"h1\");\n        i0.ɵɵtext(7, \"Registro Docente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"p\");\n        i0.ɵɵtext(9, \"\\u00DAnete al equipo acad\\u00E9mico\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"form\", 6);\n        i0.ɵɵlistener(\"ngSubmit\", function SignupProfesorPage_Template_form_ngSubmit_10_listener() {\n          return ctx.registrarProfesor();\n        });\n        i0.ɵɵelementStart(11, \"div\", 7)(12, \"ion-item\", 8);\n        i0.ɵɵelement(13, \"ion-input\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"ion-item\", 8);\n        i0.ɵɵelement(15, \"ion-input\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-item\", 8);\n        i0.ɵɵelement(17, \"ion-input\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 12)(19, \"ion-item\", 13)(20, \"ion-label\");\n        i0.ɵɵtext(21, \"\\u00BFUsa veh\\u00EDculo?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"ion-toggle\", 14);\n        i0.ɵɵlistener(\"ionChange\", function SignupProfesorPage_Template_ion_toggle_ionChange_22_listener() {\n          return ctx.toggleVehiculo();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(23, SignupProfesorPage_ng_container_23_Template, 6, 0, \"ng-container\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 16)(25, \"ion-button\", 17);\n        i0.ɵɵtext(26, \" Registrarse \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(27, \"div\", 18)(28, \"p\");\n        i0.ɵɵtext(29, \"\\u00BFYa tienes cuenta?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"ion-button\", 19);\n        i0.ɵɵtext(31, \" Iniciar Sesi\\u00F3n \");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        let tmp_2_0;\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formGroup\", ctx.formRegisProfesor);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx.formRegisProfesor.get(\"usaVehiculo\")) == null ? null : tmp_2_0.value);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", ctx.formRegisProfesor.invalid);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(5, _c0));\n      }\n    },\n    dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i3.IonButton, i3.IonContent, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonToggle, i3.BooleanValueAccessor, i3.TextValueAccessor, i3.RouterLinkDelegate, i5.RouterLink],\n    styles: [\".auth-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--chronos-primary) 0%, var(--chronos-secondary) 100%);display:flex;align-items:center;justify-content:center}.auth-wrapper[_ngcontent-%COMP%]{min-height:100%;display:flex;align-items:center;justify-content:center;padding:20px;width:100%}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:380px;background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border-radius:20px;padding:30px 25px;box-shadow:0 8px 32px #0003;border:1px solid rgba(255,255,255,.18);text-align:center;color:#fff}.auth-header[_ngcontent-%COMP%]{margin-bottom:30px}.auth-header[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{width:100px;height:100px;background:rgba(255,255,255,.2);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 15px;overflow:hidden}.auth-header[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px;color:#fff}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:0 0 5px;letter-spacing:.5px}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0;opacity:.8}.input-group[_ngcontent-%COMP%]{margin-bottom:20px}.custom-input[_ngcontent-%COMP%]{--background: #fff;--padding-start: 15px;--inner-padding-end: 15px;--min-height: 50px;border-radius:8px;margin-bottom:15px;box-shadow:0 2px 6px #0000000d}.custom-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-top: 15px;--padding-bottom: 15px;font-size:14px;--placeholder-color: #999;--color: #333}.submit-btn[_ngcontent-%COMP%]{--background: var(--chronos-secondary);--background-activated: var(--chronos-secondary-shade);--color: var(--chronos-bg-dark);--border-radius: 8px;--box-shadow: 0 4px 12px rgba(234, 179, 8, .3);font-weight:600;margin-bottom:15px;height:50px;font-size:16px}.auth-footer[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.1);padding-top:20px;display:flex;align-items:center;justify-content:center;gap:5px}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin:0;opacity:.8}.auth-footer[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{--color: var(--chronos-secondary);font-weight:600;font-size:13px;margin:0;height:auto}.auth-footer[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{opacity:.8}\"]\n  });\n  return SignupProfesorPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}