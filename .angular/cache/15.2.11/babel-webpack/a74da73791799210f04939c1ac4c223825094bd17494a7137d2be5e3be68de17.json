{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/router\";\nfunction AsistenciaPage_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const d_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(d_r2);\n  }\n}\nfunction AsistenciaPage_ng_container_37_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"div\", 40);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"div\", 41);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const d_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"out\", d_r5.fecha.getMonth() !== ctx_r4.mes);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(d_r5.fecha.getDate());\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"p\", d_r5.estado === \"P\")(\"a\", d_r5.estado === \"A\")(\"j\", d_r5.estado === \"J\")(\"s\", d_r5.estado === \"S\");\n  }\n}\nfunction AsistenciaPage_ng_container_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AsistenciaPage_ng_container_37_div_1_Template, 4, 11, \"div\", 38);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const fila_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", fila_r3);\n  }\n}\nconst _c0 = function () {\n  return [\"Lun\", \"Mar\", \"Mi\\u00E9\", \"Jue\", \"Vie\", \"S\\u00E1b\", \"Dom\"];\n};\nexport let AsistenciaPage = /*#__PURE__*/(() => {\n  class AsistenciaPage {\n    constructor() {\n      this.hoy = new Date();\n      this.mes = this.hoy.getMonth();\n      this.anio = this.hoy.getFullYear();\n      this.semanas = [];\n      this.legend = [{\n        color: 'var(--ion-color-success)',\n        label: 'Presente'\n      }, {\n        color: 'var(--ion-color-danger)',\n        label: 'Ausente'\n      }, {\n        color: '#a3e635',\n        label: 'Justificado'\n      }, {\n        color: '#e5e7eb',\n        label: 'Sin registrar'\n      }];\n    }\n    ngOnInit() {\n      this.generarMes(this.anio, this.mes);\n    }\n    generarMes(y, m) {\n      const first = new Date(y, m, 1);\n      const start = new Date(first);\n      start.setDate(first.getDate() - (first.getDay() + 6) % 7); // lunes\n      const semanas = [];\n      let cursor = new Date(start);\n      for (let w = 0; w < 6; w++) {\n        const fila = [];\n        for (let d = 0; d < 7; d++) {\n          fila.push({\n            fecha: new Date(cursor)\n          });\n          cursor.setDate(cursor.getDate() + 1);\n        }\n        semanas.push(fila);\n      }\n      // Simula estados\n      for (const fila of semanas) for (const dia of fila) {\n        if (dia.fecha.getMonth() === m) {\n          const r = Math.random();\n          dia.estado = r > 0.8 ? 'A' : r > 0.6 ? 'J' : r > 0.5 ? 'S' : 'P';\n        }\n      }\n      this.semanas = semanas;\n    }\n    nombreMes(m) {\n      return ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'][m];\n    }\n    cambiarMes(delta) {\n      let m = this.mes + delta;\n      let y = this.anio;\n      if (m < 0) {\n        m = 11;\n        y--;\n      }\n      if (m > 11) {\n        m = 0;\n        y++;\n      }\n      this.mes = m;\n      this.anio = y;\n      this.generarMes(this.anio, this.mes);\n    }\n    get presentes() {\n      return this.semanas.flat().filter(d => d.estado === 'P').length;\n    }\n    get ausentes() {\n      return this.semanas.flat().filter(d => d.estado === 'A').length;\n    }\n    get porcentaje() {\n      const diasMes = this.semanas.flat().filter(d => d.fecha.getMonth() === this.mes).length;\n      return diasMes ? this.presentes / diasMes * 100 : 0;\n    }\n  }\n  AsistenciaPage.ɵfac = function AsistenciaPage_Factory(t) {\n    return new (t || AsistenciaPage)();\n  };\n  AsistenciaPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AsistenciaPage,\n    selectors: [[\"app-asistencia\"]],\n    decls: 73,\n    vars: 12,\n    consts: [[3, \"fullscreen\"], [1, \"app-header\"], [2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"align-items\", \"center\", \"margin-bottom\", \"20px\"], [1, \"brand\", 2, \"display\", \"flex\", \"align-items\", \"center\", \"gap\", \"8px\", \"font-weight\", \"700\", \"font-size\", \"1.2rem\"], [\"defaultHref\", \"/home\", 2, \"color\", \"white\", \"margin-right\", \"8px\"], [\"name\", \"calendar-outline\"], [1, \"month-nav\", 2, \"display\", \"flex\", \"align-items\", \"center\"], [\"fill\", \"clear\", \"color\", \"light\", 3, \"click\"], [\"name\", \"chevron-back-outline\"], [1, \"month\", 2, \"font-weight\", \"600\", \"font-size\", \"15px\", \"margin\", \"0 4px\"], [\"name\", \"chevron-forward-outline\"], [1, \"header-stats\"], [1, \"stat-box\"], [1, \"stat-number\"], [1, \"stat-label\"], [1, \"app-body\"], [1, \"card\", \"calendar\"], [1, \"card-content\", 2, \"padding\", \"0\"], [1, \"grid\"], [\"class\", \"dow\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"legend\"], [1, \"legend-row\"], [1, \"item\"], [1, \"dot\", \"p\"], [1, \"dot\", \"a\"], [1, \"dot\", \"j\"], [1, \"dot\", \"s\"], [1, \"tabs\"], [\"slot\", \"bottom\"], [\"routerLink\", \"/home\"], [\"name\", \"home-outline\"], [\"routerLink\", \"/notas\"], [\"name\", \"book-outline\"], [\"routerLink\", \"/asistencia\", \"selected\", \"true\"], [\"routerLink\", \"/chat\"], [\"name\", \"chatbubble-ellipses-outline\"], [1, \"dow\"], [\"class\", \"cell\", 3, \"out\", 4, \"ngFor\", \"ngForOf\"], [1, \"cell\"], [1, \"day\"], [1, \"dot\"]],\n    template: function AsistenciaPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-content\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n        i0.ɵɵelement(4, \"ion-back-button\", 4)(5, \"ion-icon\", 5);\n        i0.ɵɵelementStart(6, \"span\");\n        i0.ɵɵtext(7, \"Asistencia\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"ion-button\", 7);\n        i0.ɵɵlistener(\"click\", function AsistenciaPage_Template_ion_button_click_9_listener() {\n          return ctx.cambiarMes(-1);\n        });\n        i0.ɵɵelement(10, \"ion-icon\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 9);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"ion-button\", 7);\n        i0.ɵɵlistener(\"click\", function AsistenciaPage_Template_ion_button_click_13_listener() {\n          return ctx.cambiarMes(1);\n        });\n        i0.ɵɵelement(14, \"ion-icon\", 10);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"div\", 11)(16, \"div\", 12)(17, \"span\", 13);\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"span\", 14);\n        i0.ɵɵtext(20, \"Presentes\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"div\", 12)(22, \"span\", 13);\n        i0.ɵɵtext(23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"span\", 14);\n        i0.ɵɵtext(25, \"Ausentes\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 12)(27, \"span\", 13);\n        i0.ɵɵtext(28);\n        i0.ɵɵpipe(29, \"number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"span\", 14);\n        i0.ɵɵtext(31, \"Del mes\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(32, \"div\", 15)(33, \"div\", 16)(34, \"div\", 17)(35, \"div\", 18);\n        i0.ɵɵtemplate(36, AsistenciaPage_div_36_Template, 2, 1, \"div\", 19);\n        i0.ɵɵtemplate(37, AsistenciaPage_ng_container_37_Template, 2, 1, \"ng-container\", 20);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(38, \"div\", 21)(39, \"div\", 17)(40, \"div\", 22)(41, \"div\", 23);\n        i0.ɵɵelement(42, \"span\", 24);\n        i0.ɵɵtext(43, \"Presente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"div\", 23);\n        i0.ɵɵelement(45, \"span\", 25);\n        i0.ɵɵtext(46, \"Ausente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"div\", 23);\n        i0.ɵɵelement(48, \"span\", 26);\n        i0.ɵɵtext(49, \"Justificado\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"div\", 23);\n        i0.ɵɵelement(51, \"span\", 27);\n        i0.ɵɵtext(52, \"Sin registrar\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(53, \"ion-footer\", 28)(54, \"ion-toolbar\")(55, \"ion-tabs\")(56, \"ion-tab-bar\", 29)(57, \"ion-tab-button\", 30);\n        i0.ɵɵelement(58, \"ion-icon\", 31);\n        i0.ɵɵelementStart(59, \"ion-label\");\n        i0.ɵɵtext(60, \"Inicio\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(61, \"ion-tab-button\", 32);\n        i0.ɵɵelement(62, \"ion-icon\", 33);\n        i0.ɵɵelementStart(63, \"ion-label\");\n        i0.ɵɵtext(64, \"Notas\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(65, \"ion-tab-button\", 34);\n        i0.ɵɵelement(66, \"ion-icon\", 5);\n        i0.ɵɵelementStart(67, \"ion-label\");\n        i0.ɵɵtext(68, \"Asistencia\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(69, \"ion-tab-button\", 35);\n        i0.ɵɵelement(70, \"ion-icon\", 36);\n        i0.ɵɵelementStart(71, \"ion-label\");\n        i0.ɵɵtext(72, \"Chat\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate2(\"\", ctx.nombreMes(ctx.mes), \" \", ctx.anio, \" \");\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.presentes);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.ausentes);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(29, 8, ctx.porcentaje, \"1.0-0\"), \"%\");\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(11, _c0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.semanas);\n      }\n    },\n    dependencies: [i1.NgForOf, i2.IonBackButton, i2.IonButton, i2.IonContent, i2.IonFooter, i2.IonIcon, i2.IonLabel, i2.IonTabBar, i2.IonTabButton, i2.IonToolbar, i2.IonTabs, i2.IonBackButtonDelegate, i2.RouterLinkDelegate, i3.RouterLink, i1.DecimalPipe],\n    styles: [\".asist-header[_ngcontent-%COMP%]{background:var(--chronos-primary);color:#fff;padding-bottom:8px}.header-toolbar[_ngcontent-%COMP%]{--background: transparent;color:#fff}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:700}.brand[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.month-nav[_ngcontent-%COMP%]{display:flex;align-items:center}.month-nav[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: #fff}.month[_ngcontent-%COMP%]{font-weight:600;font-size:15px;margin:0 4px}.quick-stats[_ngcontent-%COMP%]{padding:0 12px 12px}.stat[_ngcontent-%COMP%]{background:rgba(255,255,255,.18);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.25);border-radius:12px;padding:10px 8px;text-align:center;color:#fff}.stat[_ngcontent-%COMP%]   .kpi[_ngcontent-%COMP%]{font-size:18px;font-weight:800;line-height:1.1;margin-top:4px}.stat[_ngcontent-%COMP%]   .lbl[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.asist-content[_ngcontent-%COMP%]{--background: var(--chronos-bg-light)}.calendar[_ngcontent-%COMP%]{background:var(--chronos-card-bg);border-radius:16px;box-shadow:0 4px 6px -1px #0000001a;margin:16px;border:1px solid #E5E7EB}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;text-align:center}.dow[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:var(--chronos-text-secondary);margin-bottom:8px}.cell[_ngcontent-%COMP%]{height:40px;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;position:relative}.cell.out[_ngcontent-%COMP%]{opacity:.3}.day[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--chronos-text);z-index:1}.dot[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;margin-top:4px}.dot.p[_ngcontent-%COMP%]{background:var(--chronos-success)}.dot.a[_ngcontent-%COMP%]{background:var(--chronos-danger)}.dot.j[_ngcontent-%COMP%]{background:var(--chronos-warning)}.dot.s[_ngcontent-%COMP%]{background:#e5e7eb}.legend[_ngcontent-%COMP%]{background:var(--chronos-card-bg);border-radius:16px;margin:0 16px 16px;box-shadow:0 4px 6px -1px #0000001a;border:1px solid #E5E7EB}.legend-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;justify-content:center}.item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;color:var(--chronos-text-secondary)}.legend[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;display:inline-block}.legend[_ngcontent-%COMP%]   .dot.p[_ngcontent-%COMP%]{background:var(--chronos-success)}.legend[_ngcontent-%COMP%]   .dot.a[_ngcontent-%COMP%]{background:var(--chronos-danger)}.legend[_ngcontent-%COMP%]   .dot.j[_ngcontent-%COMP%]{background:var(--chronos-warning)}.legend[_ngcontent-%COMP%]   .dot.s[_ngcontent-%COMP%]{background:#e5e7eb}ion-footer.tabs[_ngcontent-%COMP%]{position:sticky;bottom:0}\"]\n  });\n  return AsistenciaPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}