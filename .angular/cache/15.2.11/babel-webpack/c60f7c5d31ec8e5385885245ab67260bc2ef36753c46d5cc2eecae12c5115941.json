{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/fabia/Desktop/ProyectoAppRegis/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { ApiService } from '../servicios/api.service';\nimport { NavController, ToastController } from '@ionic/angular';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../servicios/api.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/common\";\nfunction SignupPage_ng_container_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item\")(2, \"ion-label\", 2);\n    i0.ɵɵtext(3, \"Matr\\u00EDcula\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"ion-input\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-item\")(6, \"ion-label\", 2);\n    i0.ɵɵtext(7, \"Descripci\\u00F3n del Veh\\u00EDculo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"ion-input\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nexport let SignupPage = /*#__PURE__*/(() => {\n  class SignupPage {\n    constructor(fb, api, navCtrl, toastCtrl) {\n      this.fb = fb;\n      this.api = api;\n      this.navCtrl = navCtrl;\n      this.toastCtrl = toastCtrl;\n      this.formRegis = this.fb.group({\n        nombreCompleto: ['', Validators.required],\n        fechaNacimiento: ['', Validators.required],\n        rut: ['', Validators.required],\n        correoElectronico: ['', [Validators.required, Validators.email]],\n        contraseña: ['', Validators.required],\n        usaVehiculo: [false],\n        matricula: [''],\n        descripcionVehiculo: ['']\n      });\n    }\n    toggleVehiculo() {\n      if (!this.formRegis.get('usaVehiculo')?.value) {\n        this.formRegis.patchValue({\n          matricula: '',\n          descripcionVehiculo: ''\n        });\n      }\n    }\n    registrarAlumno() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const alumno = _this.formRegis.value;\n        try {\n          yield _this.api.registrarAlumno(alumno).toPromise();\n          const toast = yield _this.toastCtrl.create({\n            message: 'Registro exitoso',\n            duration: 2000,\n            color: 'success'\n          });\n          yield toast.present();\n          _this.navCtrl.navigateRoot('/login');\n        } catch (error) {\n          const toast = yield _this.toastCtrl.create({\n            message: 'Error al registrar',\n            duration: 2000,\n            color: 'danger'\n          });\n          yield toast.present();\n          console.error(error);\n        }\n      })();\n    }\n  }\n  SignupPage.ɵfac = function SignupPage_Factory(t) {\n    return new (t || SignupPage)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.NavController), i0.ɵɵdirectiveInject(i3.ToastController));\n  };\n  SignupPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SignupPage,\n    selectors: [[\"app-signup\"]],\n    decls: 33,\n    vars: 3,\n    consts: [[1, \"ion-padding\"], [3, \"formGroup\", \"ngSubmit\"], [\"position\", \"floating\"], [\"formControlName\", \"nombreCompleto\"], [\"formControlName\", \"fechaNacimiento\", \"presentation\", \"date\", \"displayFormat\", \"DD/MM/YYYY\"], [\"formControlName\", \"rut\"], [\"formControlName\", \"correoElectronico\", \"type\", \"email\"], [\"formControlName\", \"contrase\\u00F1a\", \"type\", \"password\"], [\"formControlName\", \"usaVehiculo\", 3, \"ionChange\"], [4, \"ngIf\"], [\"expand\", \"full\", \"type\", \"submit\", 3, \"disabled\"], [\"formControlName\", \"matricula\"], [\"formControlName\", \"descripcionVehiculo\"]],\n    template: function SignupPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Registro Alumno\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(4, \"ion-content\", 0)(5, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function SignupPage_Template_form_ngSubmit_5_listener() {\n          return ctx.registrarAlumno();\n        });\n        i0.ɵɵelementStart(6, \"ion-item\")(7, \"ion-label\", 2);\n        i0.ɵɵtext(8, \"Nombre Completo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"ion-input\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"ion-item\")(11, \"ion-label\", 2);\n        i0.ɵɵtext(12, \"Fecha de Nacimiento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"ion-datetime\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"ion-item\")(15, \"ion-label\", 2);\n        i0.ɵɵtext(16, \"RUT\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"ion-input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"ion-item\")(19, \"ion-label\", 2);\n        i0.ɵɵtext(20, \"Correo Electr\\u00F3nico\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"ion-input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"ion-item\")(23, \"ion-label\", 2);\n        i0.ɵɵtext(24, \"Contrase\\u00F1a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"ion-input\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"ion-item\")(27, \"ion-label\");\n        i0.ɵɵtext(28, \"\\u00BFUsa veh\\u00EDculo?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"ion-toggle\", 8);\n        i0.ɵɵlistener(\"ionChange\", function SignupPage_Template_ion_toggle_ionChange_29_listener() {\n          return ctx.toggleVehiculo();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(30, SignupPage_ng_container_30_Template, 9, 0, \"ng-container\", 9);\n        i0.ɵɵelementStart(31, \"ion-button\", 10);\n        i0.ɵɵtext(32, \" Registrarse \");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        let tmp_1_0;\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.formRegis);\n        i0.ɵɵadvance(25);\n        i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx.formRegis.get(\"usaVehiculo\")) == null ? null : tmp_1_0.value);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", ctx.formRegis.invalid);\n      }\n    },\n    dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i3.IonButton, i3.IonContent, i3.IonDatetime, i3.IonHeader, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonTitle, i3.IonToggle, i3.IonToolbar, i3.BooleanValueAccessor, i3.SelectValueAccessor, i3.TextValueAccessor, i1.FormGroupDirective, i1.FormControlName],\n    encapsulation: 2\n  });\n  return SignupPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}