{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/router\";\nfunction AsistenciaPage_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const d_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(d_r2);\n  }\n}\nfunction AsistenciaPage_ng_container_41_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"div\", 40);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"div\", 41);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const d_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"out\", d_r5.fecha.getMonth() !== ctx_r4.mes);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(d_r5.fecha.getDate());\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"p\", d_r5.estado === \"P\")(\"a\", d_r5.estado === \"A\")(\"j\", d_r5.estado === \"J\")(\"s\", d_r5.estado === \"S\");\n  }\n}\nfunction AsistenciaPage_ng_container_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AsistenciaPage_ng_container_41_div_1_Template, 4, 11, \"div\", 38);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const fila_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", fila_r3);\n  }\n}\nconst _c0 = function () {\n  return [\"Lun\", \"Mar\", \"Mi\\u00E9\", \"Jue\", \"Vie\", \"S\\u00E1b\", \"Dom\"];\n};\nexport let AsistenciaPage = /*#__PURE__*/(() => {\n  class AsistenciaPage {\n    constructor() {\n      this.hoy = new Date();\n      this.mes = this.hoy.getMonth();\n      this.anio = this.hoy.getFullYear();\n      this.semanas = [];\n      this.legend = [{\n        color: 'var(--ion-color-success)',\n        label: 'Presente'\n      }, {\n        color: 'var(--ion-color-danger)',\n        label: 'Ausente'\n      }, {\n        color: '#a3e635',\n        label: 'Justificado'\n      }, {\n        color: '#e5e7eb',\n        label: 'Sin registrar'\n      }];\n    }\n    ngOnInit() {\n      this.generarMes(this.anio, this.mes);\n    }\n    generarMes(y, m) {\n      const first = new Date(y, m, 1);\n      const start = new Date(first);\n      start.setDate(first.getDate() - (first.getDay() + 6) % 7); // lunes\n      const semanas = [];\n      let cursor = new Date(start);\n      for (let w = 0; w < 6; w++) {\n        const fila = [];\n        for (let d = 0; d < 7; d++) {\n          fila.push({\n            fecha: new Date(cursor)\n          });\n          cursor.setDate(cursor.getDate() + 1);\n        }\n        semanas.push(fila);\n      }\n      // Simula estados\n      for (const fila of semanas) for (const dia of fila) {\n        if (dia.fecha.getMonth() === m) {\n          const r = Math.random();\n          dia.estado = r > 0.8 ? 'A' : r > 0.6 ? 'J' : r > 0.5 ? 'S' : 'P';\n        }\n      }\n      this.semanas = semanas;\n    }\n    nombreMes(m) {\n      return ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'][m];\n    }\n    cambiarMes(delta) {\n      let m = this.mes + delta;\n      let y = this.anio;\n      if (m < 0) {\n        m = 11;\n        y--;\n      }\n      if (m > 11) {\n        m = 0;\n        y++;\n      }\n      this.mes = m;\n      this.anio = y;\n      this.generarMes(this.anio, this.mes);\n    }\n    get presentes() {\n      return this.semanas.flat().filter(d => d.estado === 'P').length;\n    }\n    get ausentes() {\n      return this.semanas.flat().filter(d => d.estado === 'A').length;\n    }\n    get porcentaje() {\n      const diasMes = this.semanas.flat().filter(d => d.fecha.getMonth() === this.mes).length;\n      return diasMes ? this.presentes / diasMes * 100 : 0;\n    }\n  }\n  AsistenciaPage.ɵfac = function AsistenciaPage_Factory(t) {\n    return new (t || AsistenciaPage)();\n  };\n  AsistenciaPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AsistenciaPage,\n    selectors: [[\"app-asistencia\"]],\n    decls: 77,\n    vars: 11,\n    consts: [[1, \"asist-header\", \"ion-no-border\"], [1, \"header-toolbar\"], [\"slot\", \"start\"], [\"defaultHref\", \"/home\"], [1, \"brand\"], [\"name\", \"calendar-outline\"], [\"slot\", \"end\", 1, \"month-nav\"], [\"fill\", \"clear\", 3, \"click\"], [\"name\", \"chevron-back-outline\"], [1, \"month\"], [\"name\", \"chevron-forward-outline\"], [1, \"quick-stats\"], [\"size\", \"4\"], [1, \"stat\"], [1, \"kpi\"], [1, \"lbl\"], [1, \"asist-content\"], [1, \"calendar\"], [1, \"grid\"], [\"class\", \"dow\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"legend\"], [1, \"legend-row\"], [1, \"item\"], [1, \"dot\", \"p\"], [1, \"dot\", \"a\"], [1, \"dot\", \"j\"], [1, \"dot\", \"s\"], [1, \"tabs\"], [\"slot\", \"bottom\"], [\"routerLink\", \"/home\"], [\"name\", \"home-outline\"], [\"routerLink\", \"/notas\"], [\"name\", \"book-outline\"], [\"routerLink\", \"/asistencia\", \"selected\", \"true\"], [\"routerLink\", \"/chat\"], [\"name\", \"chatbubble-ellipses-outline\"], [1, \"dow\"], [\"class\", \"cell\", 3, \"out\", 4, \"ngFor\", \"ngForOf\"], [1, \"cell\"], [1, \"day\"], [1, \"dot\"]],\n    template: function AsistenciaPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\", 1)(2, \"ion-buttons\", 2);\n        i0.ɵɵelement(3, \"ion-back-button\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-title\", 4);\n        i0.ɵɵelement(5, \"ion-icon\", 5);\n        i0.ɵɵelementStart(6, \"span\");\n        i0.ɵɵtext(7, \"Asistencia\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"ion-buttons\", 6)(9, \"ion-button\", 7);\n        i0.ɵɵlistener(\"click\", function AsistenciaPage_Template_ion_button_click_9_listener() {\n          return ctx.cambiarMes(-1);\n        });\n        i0.ɵɵelement(10, \"ion-icon\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 9);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"ion-button\", 7);\n        i0.ɵɵlistener(\"click\", function AsistenciaPage_Template_ion_button_click_13_listener() {\n          return ctx.cambiarMes(1);\n        });\n        i0.ɵɵelement(14, \"ion-icon\", 10);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"ion-grid\", 11)(16, \"ion-row\")(17, \"ion-col\", 12)(18, \"div\", 13)(19, \"div\", 14);\n        i0.ɵɵtext(20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 15);\n        i0.ɵɵtext(22, \"Presentes\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"ion-col\", 12)(24, \"div\", 13)(25, \"div\", 14);\n        i0.ɵɵtext(26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 15);\n        i0.ɵɵtext(28, \"Ausentes\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(29, \"ion-col\", 12)(30, \"div\", 13)(31, \"div\", 14);\n        i0.ɵɵtext(32);\n        i0.ɵɵpipe(33, \"number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"div\", 15);\n        i0.ɵɵtext(35, \"Del mes\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(36, \"ion-content\", 16)(37, \"ion-card\", 17)(38, \"ion-card-content\")(39, \"div\", 18);\n        i0.ɵɵtemplate(40, AsistenciaPage_div_40_Template, 2, 1, \"div\", 19);\n        i0.ɵɵtemplate(41, AsistenciaPage_ng_container_41_Template, 2, 1, \"ng-container\", 20);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(42, \"ion-card\", 21)(43, \"ion-card-content\")(44, \"div\", 22)(45, \"div\", 23);\n        i0.ɵɵelement(46, \"span\", 24);\n        i0.ɵɵtext(47, \"Presente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"div\", 23);\n        i0.ɵɵelement(49, \"span\", 25);\n        i0.ɵɵtext(50, \"Ausente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"div\", 23);\n        i0.ɵɵelement(52, \"span\", 26);\n        i0.ɵɵtext(53, \"Justificado\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"div\", 23);\n        i0.ɵɵelement(55, \"span\", 27);\n        i0.ɵɵtext(56, \"Sin registrar\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(57, \"ion-footer\", 28)(58, \"ion-toolbar\")(59, \"ion-tabs\")(60, \"ion-tab-bar\", 29)(61, \"ion-tab-button\", 30);\n        i0.ɵɵelement(62, \"ion-icon\", 31);\n        i0.ɵɵelementStart(63, \"ion-label\");\n        i0.ɵɵtext(64, \"Inicio\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(65, \"ion-tab-button\", 32);\n        i0.ɵɵelement(66, \"ion-icon\", 33);\n        i0.ɵɵelementStart(67, \"ion-label\");\n        i0.ɵɵtext(68, \"Notas\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(69, \"ion-tab-button\", 34);\n        i0.ɵɵelement(70, \"ion-icon\", 5);\n        i0.ɵɵelementStart(71, \"ion-label\");\n        i0.ɵɵtext(72, \"Asistencia\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(73, \"ion-tab-button\", 35);\n        i0.ɵɵelement(74, \"ion-icon\", 36);\n        i0.ɵɵelementStart(75, \"ion-label\");\n        i0.ɵɵtext(76, \"Chat\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate2(\"\", ctx.nombreMes(ctx.mes), \" \", ctx.anio, \"\");\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.presentes);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.ausentes);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(33, 7, ctx.porcentaje, \"1.0-0\"), \"%\");\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(10, _c0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.semanas);\n      }\n    },\n    dependencies: [i1.NgForOf, i2.IonBackButton, i2.IonButton, i2.IonButtons, i2.IonCard, i2.IonCardContent, i2.IonCol, i2.IonContent, i2.IonFooter, i2.IonGrid, i2.IonHeader, i2.IonIcon, i2.IonLabel, i2.IonRow, i2.IonTabBar, i2.IonTabButton, i2.IonTitle, i2.IonToolbar, i2.IonTabs, i2.IonBackButtonDelegate, i2.RouterLinkDelegate, i3.RouterLink, i1.DecimalPipe],\n    styles: [\".asist-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4,#3b82f6);color:#fff}.header-toolbar[_ngcontent-%COMP%]{--background: transparent;color:#fff}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:700}.month-nav[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{font-weight:700;margin:0 4px}.quick-stats[_ngcontent-%COMP%]{padding:4px 12px 12px}.stat[_ngcontent-%COMP%]{background:rgba(255,255,255,.18);border:1px solid rgba(255,255,255,.3);border-radius:12px;padding:10px 8px;text-align:center;color:#fff}.stat[_ngcontent-%COMP%]   .kpi[_ngcontent-%COMP%]{font-size:18px;font-weight:800}.stat[_ngcontent-%COMP%]   .lbl[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.asist-content[_ngcontent-%COMP%]{--background:#f6f7fb}.calendar[_ngcontent-%COMP%]{margin:12px;border-radius:16px;box-shadow:0 8px 28px #1018280f}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}.dow[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:#64748b;font-size:12px}.cell[_ngcontent-%COMP%]{height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;position:relative;background:#fff;box-shadow:inset 0 0 0 1px #eef2f7}.cell.out[_ngcontent-%COMP%]{opacity:.35}.day[_ngcontent-%COMP%]{font-weight:700;color:#0f172a;font-size:12px}.dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;position:absolute;bottom:6px}.dot.p[_ngcontent-%COMP%]{background:var(--ion-color-primary)}.dot.a[_ngcontent-%COMP%]{background:var(--ion-color-danger)}.dot.j[_ngcontent-%COMP%]{background:#a3e635}.dot.s[_ngcontent-%COMP%]{background:#e5e7eb}.legend[_ngcontent-%COMP%]{border-radius:16px}.legend[_ngcontent-%COMP%]   .legend-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.legend[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#475569}.legend[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;display:inline-block}.legend[_ngcontent-%COMP%]   .dot.p[_ngcontent-%COMP%]{background:var(--ion-color-primary)}.legend[_ngcontent-%COMP%]   .dot.a[_ngcontent-%COMP%]{background:var(--ion-color-danger)}.legend[_ngcontent-%COMP%]   .dot.j[_ngcontent-%COMP%]{background:#a3e635}.legend[_ngcontent-%COMP%]   .dot.s[_ngcontent-%COMP%]{background:#e5e7eb}ion-footer.tabs[_ngcontent-%COMP%]{position:sticky;bottom:0}\"]\n  });\n  return AsistenciaPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}