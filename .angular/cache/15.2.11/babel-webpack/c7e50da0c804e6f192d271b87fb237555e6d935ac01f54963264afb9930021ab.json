{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/fabia/Documents/ChronosModificado/ProyectoAppRegis/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ApiService } from '../servicios/api.service';\nimport { Preferences } from '@capacitor/preferences';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../servicios/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@ionic/angular\";\nfunction InscripcionPage_ion_select_option_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const asignatura_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", asignatura_r1.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", asignatura_r1.nombre, \" \");\n  }\n}\nexport let InscripcionPage = /*#__PURE__*/(() => {\n  class InscripcionPage {\n    constructor(apiService, router) {\n      this.apiService = apiService;\n      this.router = router;\n      this.asignaturas = [];\n      this.asignaturaSeleccionada = null;\n      this.alumnoId = 0;\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const {\n          value\n        } = yield Preferences.get({\n          key: 'alumnoId'\n        });\n        _this.alumnoId = Number(value);\n        _this.apiService.getAsignaturas().subscribe({\n          next: data => {\n            console.log('Asignaturas cargadas:', data);\n            _this.asignaturas = data;\n          },\n          error: err => {\n            console.error('Error al cargar asignaturas', err);\n          }\n        });\n      })();\n    }\n    inscribir() {\n      if (!this.asignaturaSeleccionada) {\n        alert('Debes seleccionar una asignatura.');\n        return;\n      }\n      const data = {\n        alumnoId: this.alumnoId,\n        asignaturaId: this.asignaturaSeleccionada\n      };\n      console.log('Enviando inscripción:', data);\n      this.apiService.inscribirAlumno(data).subscribe({\n        next: res => {\n          alert('Inscripción exitosa');\n          this.router.navigate(['/home']);\n        },\n        error: err => {\n          console.error('Error al inscribirse', err);\n          alert(err.error);\n        }\n      });\n    }\n  }\n  InscripcionPage.ɵfac = function InscripcionPage_Factory(t) {\n    return new (t || InscripcionPage)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  InscripcionPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: InscripcionPage,\n    selectors: [[\"app-inscripcion\"]],\n    decls: 19,\n    vars: 3,\n    consts: [[\"color\", \"primary\"], [1, \"ion-padding\"], [\"lines\", \"full\"], [\"position\", \"stacked\"], [\"placeholder\", \"Selecciona una opci\\u00F3n\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"expand\", \"block\", \"color\", \"success\", 1, \"ion-margin-top\", 3, \"disabled\", \"click\"], [3, \"value\"]],\n    template: function InscripcionPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Inscripci\\u00F3n de Asignaturas\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(4, \"ion-content\", 1)(5, \"ion-card\")(6, \"ion-card-header\")(7, \"ion-card-subtitle\");\n        i0.ɵɵtext(8, \"Formulario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ion-card-title\");\n        i0.ɵɵtext(10, \"Selecciona tu asignatura\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"ion-card-content\")(12, \"ion-item\", 2)(13, \"ion-label\", 3);\n        i0.ɵɵtext(14, \"Asignatura\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"ion-select\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function InscripcionPage_Template_ion_select_ngModelChange_15_listener($event) {\n          return ctx.asignaturaSeleccionada = $event;\n        });\n        i0.ɵɵtemplate(16, InscripcionPage_ion_select_option_16_Template, 2, 2, \"ion-select-option\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"ion-button\", 6);\n        i0.ɵɵlistener(\"click\", function InscripcionPage_Template_ion_button_click_17_listener() {\n          return ctx.inscribir();\n        });\n        i0.ɵɵtext(18, \" Inscribirme \");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"ngModel\", ctx.asignaturaSeleccionada);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.asignaturas);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !ctx.asignaturaSeleccionada);\n      }\n    },\n    dependencies: [i3.NgForOf, i4.NgControlStatus, i4.NgModel, i5.IonButton, i5.IonCard, i5.IonCardContent, i5.IonCardHeader, i5.IonCardSubtitle, i5.IonCardTitle, i5.IonContent, i5.IonHeader, i5.IonItem, i5.IonLabel, i5.IonSelect, i5.IonSelectOption, i5.IonTitle, i5.IonToolbar, i5.SelectValueAccessor],\n    styles: [\"ion-header[_ngcontent-%COMP%]{--background: #ffffff;box-shadow:0 2px 10px #0000000d}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color: #ffffff;--color: #2a2a2a;font-weight:700;font-size:18px}ion-content[_ngcontent-%COMP%]{--ion-background-color: #E1EAF9;display:flex;flex-direction:column;justify-content:flex-start;padding:16px}ion-item[_ngcontent-%COMP%]{--background: #fff;border-radius:10px;margin-bottom:16px;padding:12px;box-shadow:0 4px 12px #0000000d}ion-label[_ngcontent-%COMP%]{font-weight:500;color:#333}ion-select[_ngcontent-%COMP%]{font-size:16px}ion-button[_ngcontent-%COMP%]{margin-top:20px;--background: #3b82f6;--border-radius: 10px;--padding-start: 12px;--padding-end: 12px;font-weight:700;letter-spacing:.5px}\"]\n  });\n  return InscripcionPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}