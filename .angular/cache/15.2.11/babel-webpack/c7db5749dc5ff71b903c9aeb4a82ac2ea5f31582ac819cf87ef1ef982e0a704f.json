{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/fabia/Documents/ChronosModificado/ProyectoAppRegis/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { ApiService } from '../servicios/api.service';\nimport { NavController, ToastController } from '@ionic/angular';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../servicios/api.service\";\nimport * as i3 from \"@ionic/angular\";\nexport let SignupProfesorPage = /*#__PURE__*/(() => {\n  class SignupProfesorPage {\n    constructor(fb, api, navCtrl, toastCtrl) {\n      this.fb = fb;\n      this.api = api;\n      this.navCtrl = navCtrl;\n      this.toastCtrl = toastCtrl;\n      this.formRegis = this.fb.group({\n        nombreCompleto: ['', Validators.required],\n        correoElectronico: ['', [Validators.required, Validators.email]],\n        contrasena: ['', Validators.required],\n        especialidad: ['', Validators.required]\n      });\n    }\n    registrarProfesor() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (_this.formRegis.invalid) {\n          const toast = yield _this.toastCtrl.create({\n            message: 'Por favor completa todos los campos obligatorios',\n            duration: 2000,\n            color: 'warning'\n          });\n          yield toast.present();\n          return;\n        }\n        const formValue = _this.formRegis.value;\n        const profesor = {\n          Nom_prof: formValue.nombreCompleto,\n          CorreoElectronico: formValue.correoElectronico?.trim(),\n          Contrasena: formValue.contrasena?.trim()\n        };\n        try {\n          yield _this.api.registrarProfesor(profesor).toPromise();\n          const toast = yield _this.toastCtrl.create({\n            message: 'Registro exitoso',\n            duration: 2000,\n            color: 'success'\n          });\n          yield toast.present();\n          _this.navCtrl.navigateRoot('/login');\n        } catch (error) {\n          let mensaje = 'Error al registrar';\n          if (error && typeof error === 'object' && 'error' in error) {\n            const err = error;\n            if (typeof err.error === 'string') {\n              mensaje = err.error;\n            } else if (err.status === 409) {\n              mensaje = 'El correo ya está registrado';\n            }\n          }\n          const toast = yield _this.toastCtrl.create({\n            message: mensaje,\n            duration: 2000,\n            color: 'danger'\n          });\n          yield toast.present();\n        }\n      })();\n    }\n  }\n  SignupProfesorPage.ɵfac = function SignupProfesorPage_Factory(t) {\n    return new (t || SignupProfesorPage)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.NavController), i0.ɵɵdirectiveInject(i3.ToastController));\n  };\n  SignupProfesorPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SignupProfesorPage,\n    selectors: [[\"app-signup-profesor\"]],\n    decls: 24,\n    vars: 2,\n    consts: [[1, \"ion-padding\"], [3, \"formGroup\", \"ngSubmit\"], [\"position\", \"floating\"], [\"formControlName\", \"nombreCompleto\"], [\"formControlName\", \"correoElectronico\", \"type\", \"email\"], [\"formControlName\", \"contrasena\", \"type\", \"password\"], [\"formControlName\", \"especialidad\"], [\"expand\", \"full\", \"type\", \"submit\", 3, \"disabled\"]],\n    template: function SignupProfesorPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Registro Profesor\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(4, \"ion-content\", 0)(5, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function SignupProfesorPage_Template_form_ngSubmit_5_listener() {\n          return ctx.registrarProfesor();\n        });\n        i0.ɵɵelementStart(6, \"ion-item\")(7, \"ion-label\", 2);\n        i0.ɵɵtext(8, \"Nombre Completo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"ion-input\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"ion-item\")(11, \"ion-label\", 2);\n        i0.ɵɵtext(12, \"Correo Electr\\u00F3nico\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"ion-input\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"ion-item\")(15, \"ion-label\", 2);\n        i0.ɵɵtext(16, \"Contrase\\u00F1a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"ion-input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"ion-item\")(19, \"ion-label\", 2);\n        i0.ɵɵtext(20, \"Especialidad\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"ion-input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"ion-button\", 7);\n        i0.ɵɵtext(23, \" Registrarse \");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.formRegis);\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"disabled\", ctx.formRegis.invalid);\n      }\n    },\n    dependencies: [i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i3.IonButton, i3.IonContent, i3.IonHeader, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonTitle, i3.IonToolbar, i3.TextValueAccessor],\n    styles: [\"ion-content[_ngcontent-%COMP%]{background:#f7f9fc}ion-title[_ngcontent-%COMP%]{color:#2563eb}ion-button[_ngcontent-%COMP%]{margin-top:18px}\"]\n  });\n  return SignupProfesorPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}