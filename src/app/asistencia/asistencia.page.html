<ion-header class="asist-header ion-no-border">
  <ion-toolbar class="header-toolbar">
    <ion-buttons slot="start"><ion-back-button defaultHref="/home"></ion-back-button></ion-buttons>
    <ion-title class="brand"><ion-icon name="calendar-outline"></ion-icon><span>Asistencia</span></ion-title>
    <ion-buttons slot="end" class="month-nav">
      <ion-button fill="clear" (click)="cambiarMes(-1)"><ion-icon name="chevron-back-outline"></ion-icon></ion-button>
      <div class="month">{{ nombreMes(mes) }} {{ anio }}</div>
      <ion-button fill="clear" (click)="cambiarMes(1)"><ion-icon name="chevron-forward-outline"></ion-icon></ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-grid class="quick-stats">
    <ion-row>
      <ion-col size="4">
        <div class="stat">
          <div class="kpi">{{ presentes }}</div>
          <div class="lbl">Presentes</div>
        </div>
      </ion-col>
      <ion-col size="4">
        <div class="stat">
          <div class="kpi">{{ ausentes }}</div>
          <div class="lbl">Ausentes</div>
        </div>
      </ion-col>
      <ion-col size="4">
        <div class="stat">
          <div class="kpi">{{ porcentaje | number:'1.0-0' }}%</div>
          <div class="lbl">Del mes</div>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-header>

<ion-content class="asist-content">
  <ion-card class="calendar">
    <ion-card-content>
      <div class="grid">
        <div class="dow" *ngFor="let d of ['Lun','Mar','Mié','Jue','Vie','Sáb','Dom']">{{ d }}</div>
        <ng-container *ngFor="let fila of semanas">
          <div *ngFor="let d of fila" class="cell" [class.out]="d.fecha.getMonth() !== mes">
            <div class="day">{{ d.fecha.getDate() }}</div>
            <div class="dot" [class.p]="d.estado==='P'" [class.a]="d.estado==='A'" [class.j]="d.estado==='J'"
              [class.s]="d.estado==='S'"></div>
          </div>
        </ng-container>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-card class="legend">
    <ion-card-content>
      <div class="legend-row">
        <div class="item"><span class="dot p"></span>Presente</div>
        <div class="item"><span class="dot a"></span>Ausente</div>
        <div class="item"><span class="dot j"></span>Justificado</div>
        <div class="item"><span class="dot s"></span>Sin registrar</div>
      </div>
    </ion-card-content>
  </ion-card>

</ion-content>

<ion-footer class="tabs">
  <ion-toolbar>
    <ion-tabs>
      <ion-tab-bar slot="bottom">
        <ion-tab-button routerLink="/home"><ion-icon
            name="home-outline"></ion-icon><ion-label>Inicio</ion-label></ion-tab-button>
        <ion-tab-button routerLink="/notas"><ion-icon
            name="book-outline"></ion-icon><ion-label>Notas</ion-label></ion-tab-button>
        <ion-tab-button routerLink="/asistencia" selected="true"><ion-icon
            name="calendar-outline"></ion-icon><ion-label>Asistencia</ion-label></ion-tab-button>
        <ion-tab-button routerLink="/chat"><ion-icon
            name="chatbubble-ellipses-outline"></ion-icon><ion-label>Chat</ion-label></ion-tab-button>
      </ion-tab-bar>
    </ion-tabs>
  </ion-toolbar>
</ion-footer>